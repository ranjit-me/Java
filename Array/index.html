<!doctype html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Rose For You</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Lora:ital,wght@0,400;0,500;0,600;1,400&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tailwind Config for Custom Colors -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              blush: "#F6E6E9",
              rose: {
                50: "#fff1f2",
                100: "#ffe4e6",
                200: "#fecdd3",
                300: "#fda4af",
                400: "#fb7185",
                500: "#f43f5e",
                600: "#C0392B", // Custom Rose Red
                700: "#be123c",
                800: "#9f1239",
                900: "#881337",
              },
              ivory: "#FFF8F2",
              leaf: "#2E4A37",
            },
            fontFamily: {
              script: ["Dancing Script", "cursive"],
              serif: ["Lora", "serif"],
            },
            animation: {
              float: "float 6s ease-in-out infinite",
              "pulse-slow": "pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-10px)" },
              },
            },
          },
        },
      };
    </script>

    <style>
      body {
        background-color: #fff8f2; /* Ivory */
        color: #2e4a37;
        overflow-x: hidden;
      }

      /* Canvas container for petals */
      #petal-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 10;
      }

      /* Handwritten font class */
      .handwritten {
        font-family: "Dancing Script", cursive;
      }

      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f6e6e9;
      }
      ::-webkit-scrollbar-thumb {
        background: #c0392b;
        border-radius: 4px;
      }

      /* Midnight Overlay */
      #midnight-overlay {
        background: radial-gradient(circle at center, #1a202c 0%, #000000 100%);
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.5s ease-in-out;
      }
      #midnight-overlay.active {
        opacity: 1;
        pointer-events: all;
      }

      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle var(--duration) ease-in-out infinite;
      }

      @keyframes twinkle {
        0%,
        100% {
          opacity: 0.2;
          transform: scale(0.8);
        }
        50% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      /* Ribbon Unwrapping */
      .ribbon-content {
        max-height: 0;
        overflow: hidden;
        transition:
          max-height 0.8s ease-out,
          opacity 0.5s ease;
        opacity: 0;
      }
      .ribbon-content.open {
        max-height: 200px;
        opacity: 1;
      }
    </style>
  </head>
  <body class="font-serif antialiased">
    <!-- Navigation -->
    <nav
      class="fixed w-full z-50 bg-ivory/90 backdrop-blur-sm border-b border-rose-100 transition-all duration-300"
      id="navbar"
    >
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-2">
            <i data-lucide="flower-2" class="text-rose-600 w-6 h-6"></i>
            <span class="font-script text-2xl text-rose-600 font-bold"
              >Rose Day</span
            >
          </div>
          <div class="hidden md:flex space-x-8 text-leaf text-sm tracking-wide">
            <a href="#create" class="hover:text-rose-600 transition"
              >Create Card</a
            >
            <a href="#surprise" class="hover:text-rose-600 transition"
              >Surprise Box</a
            >
            <a href="#midnight" class="hover:text-rose-600 transition"
              >Midnight</a
            >
            <a href="#ideas" class="hover:text-rose-600 transition">Ideas</a>
          </div>
          <button
            onclick="document.getElementById('create').scrollIntoView()"
            class="bg-rose-600 text-white px-4 py-2 rounded-full font-script text-lg hover:bg-rose-700 transition shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
          >
            Send a Rose
          </button>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <header
      class="relative min-h-screen flex items-center justify-center overflow-hidden"
    >
      <!-- Background Image with Overlay -->
      <div class="absolute inset-0 z-0">
        <img
          src="https://images.unsplash.com/photo-1496661415325-ef852f9e8e7c?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80"
          alt="Soft Roses"
          class="w-full h-full object-cover opacity-30"
        />
        <div
          class="absolute inset-0 bg-gradient-to-t from-ivory via-transparent to-transparent"
        ></div>
      </div>

      <!-- Canvas for Petals -->
      <canvas id="petal-canvas"></canvas>

      <!-- Content -->
      <div class="relative z-20 text-center px-4 max-w-4xl mx-auto mt-16">
        <div
          class="inline-block bg-white/60 backdrop-blur-sm px-4 py-1 rounded-full mb-6 border border-rose-200 animate-float"
        >
          <span
            class="text-rose-600 font-medium text-sm tracking-widest uppercase"
            >Rose Day 2025</span
          >
        </div>
        <h1
          class="font-script text-6xl md:text-8xl text-rose-600 mb-6 drop-shadow-sm leading-tight"
        >
          A rose for you,<br />because you make life bloom.
        </h1>
        <p
          class="text-xl md:text-2xl text-leaf/80 mb-10 max-w-2xl mx-auto font-light"
        >
          Simple. Romantic. From me to you.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#create"
            class="bg-rose-600 text-white px-8 py-4 rounded-full font-serif text-lg hover:bg-rose-700 transition shadow-lg hover:shadow-rose-300/50 flex items-center justify-center gap-2"
          >
            <i data-lucide="pen-tool" class="w-5 h-5"></i> Create a Note
          </a>
          <a
            href="#ideas"
            class="bg-white text-rose-600 border border-rose-200 px-8 py-4 rounded-full font-serif text-lg hover:bg-rose-50 transition shadow-md flex items-center justify-center gap-2"
          >
            <i data-lucide="sparkles" class="w-5 h-5"></i> Surprise Ideas
          </a>
        </div>
      </div>
    </header>

    <!-- Microcopy Strip -->
    <div class="bg-rose-100 py-3 overflow-hidden border-y border-rose-200">
      <div class="relative flex overflow-x-hidden">
        <div
          class="py-1 animate-marquee whitespace-nowrap text-rose-800 font-script text-xl w-full text-center"
          id="microcopy"
        >
          "Youâ€™re sweeter than a rose petal."
        </div>
      </div>
    </div>

    <!-- Section 1: One-Favorite-Rose + Handwritten Note -->
    <section id="create" class="py-20 bg-white relative">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <!-- Controls -->
          <div class="space-y-8">
            <div class="space-y-2">
              <h2 class="font-script text-5xl text-rose-600">Pick a Rose</h2>
              <p class="text-leaf/70">
                Choose a color and write a heartfelt note.
              </p>
            </div>

            <!-- Rose Selector -->
            <div class="space-y-4">
              <label
                class="block text-sm font-bold text-leaf uppercase tracking-wider"
                >1. Choose Color</label
              >
              <div class="flex gap-4">
                <button
                  onclick="selectRose('red')"
                  class="rose-btn group relative w-16 h-16 rounded-full bg-red-600 shadow-md ring-4 ring-transparent focus:ring-red-200 transition-all transform hover:scale-105 active:scale-95"
                  data-color="red"
                  aria-label="Red Rose"
                >
                  <span
                    class="absolute -bottom-8 left-1/2 -translate-x-1/2 text-xs text-leaf opacity-0 group-hover:opacity-100 transition whitespace-nowrap"
                    >Love</span
                  >
                </button>
                <button
                  onclick="selectRose('pink')"
                  class="rose-btn group relative w-16 h-16 rounded-full bg-pink-400 shadow-md ring-4 ring-transparent focus:ring-pink-200 transition-all transform hover:scale-105 active:scale-95"
                  data-color="pink"
                  aria-label="Pink Rose"
                >
                  <span
                    class="absolute -bottom-8 left-1/2 -translate-x-1/2 text-xs text-leaf opacity-0 group-hover:opacity-100 transition whitespace-nowrap"
                    >Admiration</span
                  >
                </button>
                <button
                  onclick="selectRose('white')"
                  class="rose-btn group relative w-16 h-16 rounded-full bg-white border border-gray-200 shadow-md ring-4 ring-transparent focus:ring-gray-200 transition-all transform hover:scale-105 active:scale-95"
                  data-color="white"
                  aria-label="White Rose"
                >
                  <span
                    class="absolute -bottom-8 left-1/2 -translate-x-1/2 text-xs text-leaf opacity-0 group-hover:opacity-100 transition whitespace-nowrap"
                    >Pure</span
                  >
                </button>
              </div>
            </div>

            <!-- Note Input -->
            <div class="space-y-4">
              <label
                class="block text-sm font-bold text-leaf uppercase tracking-wider"
                >2. Write a Note</label
              >
              <textarea
                id="note-input"
                maxlength="120"
                rows="3"
                class="w-full p-4 rounded-xl border border-rose-200 focus:border-rose-500 focus:ring focus:ring-rose-200 transition bg-ivory font-serif resize-none"
                placeholder="Type your message here..."
              ></textarea>
              <div class="flex gap-2">
                <button
                  onclick="
                    setExampleNote('Life is better with you (and roses ðŸŒ¹).')
                  "
                  class="text-xs bg-rose-50 text-rose-700 px-3 py-1 rounded-full hover:bg-rose-100 transition"
                >
                  Romantic
                </button>
                <button
                  onclick="setExampleNote('Sending you a garden of hugs!')"
                  class="text-xs bg-rose-50 text-rose-700 px-3 py-1 rounded-full hover:bg-rose-100 transition"
                >
                  Cute
                </button>
              </div>
            </div>
          </div>

          <!-- Preview Card -->
          <div
            class="relative bg-blush p-8 rounded-[2rem] shadow-xl border border-rose-100 flex flex-col items-center text-center transform rotate-1 hover:rotate-0 transition duration-500"
            id="card-preview"
          >
            <!-- Rose Icon Display -->
            <div
              id="rose-display"
              class="mb-6 transition-all duration-500 transform hover:scale-110"
            >
              <!-- SVG Rose will be injected here -->
              <svg
                width="120"
                height="120"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#C0392B"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M12 21a9 9 0 0 0 9-9 9 9 0 0 0-9-9 9 9 0 0 0-9 9 9 9 0 0 0 9 9Z"
                />
                <path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                <path d="M12 16v5" />
                <path d="M12 21l-2-2" />
                <path d="M12 21l2-2" />
              </svg>
            </div>

            <!-- Paper Texture bg -->
            <div
              class="bg-white p-6 shadow-inner w-full rounded-lg relative overflow-hidden"
              style="
                background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
                background-size: 20px 20px;
              "
            >
              <p
                id="note-preview"
                class="font-script text-3xl text-gray-800 leading-relaxed min-h-[100px] flex items-center justify-center break-words"
              >
                Life is better with you (and roses ðŸŒ¹).
              </p>
              <div class="mt-4 text-right">
                <span class="font-serif text-sm text-gray-400 italic">
                  - Yours truly</span
                >
              </div>
            </div>

            <button
              onclick="
                showToast('Card Copied to Clipboard! Share it via WhatsApp.')
              "
              class="mt-8 flex items-center gap-2 text-rose-600 font-bold hover:text-rose-800 transition"
            >
              <i data-lucide="share-2" class="w-4 h-4"></i> Share Card
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: Rose Surprise Box -->
    <section id="surprise" class="py-20 bg-ivory">
      <div class="max-w-6xl mx-auto px-4 text-center">
        <h2 class="font-script text-5xl text-rose-600 mb-4">
          Rose Surprise Box
        </h2>
        <p class="text-leaf/70 mb-12">
          Pick a style and hide a secret message inside.
        </p>

        <!-- Carousel Area -->
        <div
          class="relative max-w-3xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-rose-100"
        >
          <div
            id="carousel-content"
            class="p-8 md:p-12 transition-all duration-300"
          >
            <!-- Dynamic Content Loaded via JS -->
          </div>

          <!-- Controls -->
          <div class="absolute top-1/2 -translate-y-1/2 left-4">
            <button
              onclick="prevSlide()"
              class="p-2 rounded-full bg-white shadow-md hover:bg-rose-50 text-rose-600"
            >
              <i data-lucide="chevron-left"></i>
            </button>
          </div>
          <div class="absolute top-1/2 -translate-y-1/2 right-4">
            <button
              onclick="nextSlide()"
              class="p-2 rounded-full bg-white shadow-md hover:bg-rose-50 text-rose-600"
            >
              <i data-lucide="chevron-right"></i>
            </button>
          </div>
        </div>

        <!-- Secret Message Interaction -->
        <div
          class="mt-12 max-w-lg mx-auto bg-white p-6 rounded-2xl shadow-sm border border-rose-100"
        >
          <div
            class="flex items-center justify-between cursor-pointer"
            onclick="toggleRibbon()"
          >
            <div class="flex items-center gap-3">
              <i data-lucide="gift" class="text-rose-500"></i>
              <span class="font-bold text-leaf">Secret Ribbon Message</span>
            </div>
            <i
              data-lucide="chevron-down"
              id="ribbon-icon"
              class="transition-transform duration-300"
            ></i>
          </div>
          <div
            id="ribbon-content"
            class="ribbon-content text-left mt-4 border-t border-dashed border-rose-200 pt-4"
          >
            <label class="text-xs font-bold text-rose-400 uppercase"
              >Message to reveal:</label
            >
            <input
              type="text"
              placeholder="e.g. Look in your jacket pocket..."
              class="w-full mt-2 p-2 border-b border-rose-300 focus:border-rose-600 outline-none bg-transparent font-script text-xl text-rose-700"
            />
            <p class="text-xs text-gray-400 mt-2">
              The recipient will see this when they "unwrap" the digital
              bouquet.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Midnight Delivery -->
    <section
      id="midnight"
      class="py-20 bg-leaf text-ivory relative overflow-hidden"
    >
      <!-- Decorative stars -->
      <div class="absolute top-10 left-10 text-rose-200/20">
        <i data-lucide="star" class="w-8 h-8"></i>
      </div>
      <div class="absolute bottom-10 right-10 text-rose-200/20">
        <i data-lucide="moon" class="w-12 h-12"></i>
      </div>

      <div class="max-w-4xl mx-auto px-4 text-center relative z-10">
        <div
          class="inline-block p-3 rounded-full bg-white/10 mb-6 backdrop-blur-md"
        >
          <i data-lucide="clock" class="w-8 h-8 text-rose-200"></i>
        </div>
        <h2 class="font-script text-5xl text-rose-200 mb-4">
          Midnight Rose Delivery
        </h2>
        <p class="text-rose-100/80 mb-8 max-w-xl mx-auto">
          Schedule a digital rose to arrive exactly when the clock strikes 12.
          Perfect for starting the day with love.
        </p>

        <div
          class="bg-white/10 backdrop-blur-md p-8 rounded-3xl max-w-md mx-auto border border-white/20"
        >
          <div class="flex items-center gap-4 justify-center mb-6">
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                id="midnight-check"
                class="w-5 h-5 text-rose-500 rounded focus:ring-rose-500 border-gray-300"
              />
              <span class="font-medium">Make it a midnight surprise âœ¨</span>
            </label>
          </div>
          <button
            onclick="scheduleDelivery()"
            class="w-full bg-rose-200 text-rose-900 font-bold py-3 rounded-xl hover:bg-white transition shadow-lg transform active:scale-95"
          >
            Schedule for 12:00 AM
          </button>
        </div>
      </div>
    </section>

    <!-- Section 4: DIY & Fun (Grid) -->
    <section id="ideas" class="py-20 bg-white">
      <div class="max-w-6xl mx-auto px-4">
        <div class="text-center mb-16">
          <h2 class="font-script text-5xl text-rose-600 mb-4">
            Make it Special
          </h2>
          <p class="text-leaf/70">More than just a flower. Create a memory.</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <!-- DIY Rose Pack -->
          <div
            class="bg-ivory p-8 rounded-3xl border border-rose-100 hover:shadow-xl transition group"
          >
            <div
              class="w-12 h-12 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 mb-6 group-hover:scale-110 transition"
            >
              <i data-lucide="scissors" class="w-6 h-6"></i>
            </div>
            <h3 class="font-serif text-2xl text-leaf mb-2">DIY Rose Wraps</h3>
            <p class="text-sm text-gray-500 mb-6">
              Printable templates to wrap chocolates or single roses with custom
              reasons.
            </p>
            <button
              onclick="showToast('Templates downloaded! (Mock)')"
              class="text-rose-600 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:gap-2 transition-all"
            >
              Download PDF <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </button>
          </div>

          <!-- Treasure Hunt -->
          <div
            class="bg-ivory p-8 rounded-3xl border border-rose-100 hover:shadow-xl transition group"
          >
            <div
              class="w-12 h-12 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 mb-6 group-hover:scale-110 transition"
            >
              <i data-lucide="map" class="w-6 h-6"></i>
            </div>
            <h3 class="font-serif text-2xl text-leaf mb-2">Rose Hunt</h3>
            <p class="text-sm text-gray-500 mb-6">
              Build a mini scavenger hunt. "Where we first met", "The bench by
              the lake".
            </p>
            <div class="space-y-2 mb-4">
              <input
                type="text"
                placeholder="Clue 1..."
                class="w-full text-sm p-2 bg-white rounded border border-rose-200"
              />
              <input
                type="text"
                placeholder="Clue 2..."
                class="w-full text-sm p-2 bg-white rounded border border-rose-200"
              />
            </div>
            <button
              onclick="showToast('Clue card generated!')"
              class="text-rose-600 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:gap-2 transition-all"
            >
              Generate Map <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </button>
          </div>

          <!-- Date Ideas -->
          <div
            class="bg-ivory p-8 rounded-3xl border border-rose-100 hover:shadow-xl transition group"
          >
            <div
              class="w-12 h-12 bg-rose-100 rounded-full flex items-center justify-center text-rose-600 mb-6 group-hover:scale-110 transition"
            >
              <i data-lucide="calendar-heart" class="w-6 h-6"></i>
            </div>
            <h3 class="font-serif text-2xl text-leaf mb-2">Date Night</h3>
            <ul class="text-sm text-gray-500 mb-6 space-y-2">
              <li class="flex items-center gap-2">
                <i data-lucide="check" class="w-3 h-3 text-rose-500"></i>
                Rose-infused Hot Chocolate
              </li>
              <li class="flex items-center gap-2">
                <i data-lucide="check" class="w-3 h-3 text-rose-500"></i>
                Candlelight dinner at home
              </li>
              <li class="flex items-center gap-2">
                <i data-lucide="check" class="w-3 h-3 text-rose-500"></i>
                No-phone policy
              </li>
            </ul>
            <button
              onclick="showToast('Date checklist saved!')"
              class="text-rose-600 font-bold text-sm uppercase tracking-wide flex items-center gap-1 hover:gap-2 transition-all"
            >
              Save Plan <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-leaf text-ivory py-12 border-t border-rose-800">
      <div
        class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-6"
      >
        <div class="text-center md:text-left">
          <span class="font-script text-3xl">Rose Day</span>
          <p class="text-rose-200/60 text-sm mt-1">Made with love & petals.</p>
        </div>
        <div class="flex gap-6 text-sm text-rose-200/80">
          <a href="#" class="hover:text-white transition">About</a>
          <a href="#" class="hover:text-white transition">Privacy</a>
          <a href="#" class="hover:text-white transition">Contact</a>
        </div>
        <div class="text-rose-200/40 text-xs">&copy; 2025 Rose Day Project</div>
      </div>
    </footer>

    <!-- Midnight Effect Overlay -->
    <div
      id="midnight-overlay"
      class="fixed inset-0 z-[100] flex flex-col items-center justify-center text-center px-4"
    >
      <div class="relative">
        <i
          data-lucide="moon"
          class="w-24 h-24 text-rose-200 mb-6 animate-pulse-slow mx-auto"
        ></i>
        <h2
          class="font-script text-6xl text-rose-100 mb-4 drop-shadow-[0_0_15px_rgba(251,113,133,0.5)]"
        >
          It's Time...
        </h2>
        <p class="text-white/80 text-xl font-serif max-w-md mx-auto">
          Sending your love across the stars.
        </p>
        <button
          onclick="closeMidnight()"
          class="mt-8 text-sm text-white/50 border border-white/30 px-4 py-2 rounded-full hover:bg-white/10 transition"
        >
          Close Magic
        </button>
      </div>
    </div>

    <!-- Toast Notification -->
    <div
      id="toast"
      class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl z-50 transform translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-3"
    >
      <i data-lucide="heart" class="w-4 h-4 text-rose-500 fill-current"></i>
      <span id="toast-msg" class="text-sm font-medium">Notification</span>
    </div>

    <!-- JavaScript Logic -->
    <script>
      // Initialize Icons
      lucide.createIcons();

      /* --- 1. Petal Animation (Canvas) --- */
      const canvas = document.getElementById("petal-canvas");
      const ctx = canvas.getContext("2d");

      let width, height;
      let petals = [];

      // Resize canvas
      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight; // Full Hero height
      }
      window.addEventListener("resize", resize);
      resize();

      class Petal {
        constructor() {
          this.x = Math.random() * width;
          this.y = Math.random() * height - height; // Start above
          this.size = Math.random() * 10 + 5;
          this.speedY = Math.random() * 1 + 0.5;
          this.speedX = Math.random() * 2 - 1;
          this.rotation = Math.random() * 360;
          this.rotationSpeed = Math.random() * 2 - 1;
          this.opacity = Math.random() * 0.5 + 0.3;
          this.color = Math.random() > 0.5 ? "#f43f5e" : "#fda4af"; // Rose 500 or 300
        }

        update() {
          this.y += this.speedY;
          this.x += Math.sin(this.y * 0.01) + this.speedX * 0.5;
          this.rotation += this.rotationSpeed;

          if (this.y > height) {
            this.y = -20;
            this.x = Math.random() * width;
          }
        }

        draw() {
          ctx.save();
          ctx.translate(this.x, this.y);
          ctx.rotate((this.rotation * Math.PI) / 180);
          ctx.globalAlpha = this.opacity;
          ctx.fillStyle = this.color;

          // Draw a simple petal shape (ellipse-ish)
          ctx.beginPath();
          ctx.ellipse(0, 0, this.size, this.size / 1.5, 0, 0, Math.PI * 2);
          ctx.fill();

          ctx.restore();
        }
      }

      // Initialize petals
      for (let i = 0; i < 40; i++) {
        petals.push(new Petal());
      }

      function animatePetals() {
        ctx.clearRect(0, 0, width, height);
        petals.forEach((petal) => {
          petal.update();
          petal.draw();
        });
        requestAnimationFrame(animatePetals);
      }
      animatePetals();

      /* --- 2. Microcopy Rotator --- */
      const microcopy = document.getElementById("microcopy");
      const phrases = [
        "Youâ€™re sweeter than a rose petal.",
        "Iâ€™d share my last rose with you â€” thatâ€™s love.",
        "Roses are red, my love is true.",
        "You make my world bloom.",
        "Sending you a garden of smiles.",
      ];
      let phraseIndex = 0;

      setInterval(() => {
        microcopy.style.opacity = "0";
        setTimeout(() => {
          phraseIndex = (phraseIndex + 1) % phrases.length;
          microcopy.innerText = `"${phrases[phraseIndex]}"`;
          microcopy.style.opacity = "1";
        }, 500);
      }, 4000);
      microcopy.style.transition = "opacity 0.5s ease";

      /* --- 3. Card Builder Logic --- */
      const roseDisplay = document.getElementById("rose-display");
      const noteInput = document.getElementById("note-input");
      const notePreview = document.getElementById("note-preview");
      const roseBtns = document.querySelectorAll(".rose-btn");

      // Rose Colors (SVG paths)
      const roseColors = {
        red: "#C0392B",
        pink: "#F472B6", // pink-400
        white: "#E5E7EB", // gray-200 for stroke mainly
      };

      function selectRose(color) {
        // Update UI Active State
        roseBtns.forEach((btn) => {
          if (btn.dataset.color === color) {
            btn.classList.add("ring-offset-2");
          } else {
            btn.classList.remove("ring-offset-2");
          }
        });

        // Update SVG Color
        const svg = roseDisplay.querySelector("svg");
        const strokeColor = color === "white" ? "#9CA3AF" : roseColors[color];
        const fillColor = color === "white" ? "#FFFFFF" : roseColors[color];

        // Simple SVG manipulation: Fill the path if it's not white, or just stroke
        if (color === "white") {
          svg.setAttribute("stroke", strokeColor);
          svg.setAttribute("fill", "none");
        } else {
          svg.setAttribute("stroke", strokeColor);
          // Creating a "filled" feel by setting fill on the head of the rose (first path roughly)
          svg.querySelector("path").setAttribute("fill", fillColor);
          svg.querySelector("path").setAttribute("fill-opacity", "0.2");
        }
      }

      // Live typing
      noteInput.addEventListener("input", (e) => {
        notePreview.innerText = e.target.value || "Your note here...";
      });

      function setExampleNote(text) {
        noteInput.value = text;
        notePreview.innerText = text;
      }

      // Init default
      selectRose("red");

      /* --- 4. Surprise Box Carousel --- */
      const carouselContent = document.getElementById("carousel-content");
      const bouquets = [
        {
          title: "Classic Red",
          desc: "Timeless passion. Includes a tiny handwritten love poem.",
          color: "text-red-600",
          icon: "heart",
        },
        {
          title: "Sweet Pink",
          desc: "Gentle admiration. Comes with a digital strawberry chocolate.",
          color: "text-pink-500",
          icon: "smile",
        },
        {
          title: "Sunny Mix",
          desc: "Joy & Friendship. Includes a hidden friendship charm.",
          color: "text-orange-500",
          icon: "sun",
        },
      ];
      let currentSlide = 0;

      function renderSlide() {
        const b = bouquets[currentSlide];
        carouselContent.innerHTML = `
                <div class="flex flex-col items-center animate-fade-in">
                    <div class="w-24 h-24 rounded-full bg-rose-50 flex items-center justify-center mb-6">
                        <i data-lucide="${b.icon}" class="w-12 h-12 ${b.color}"></i>
                    </div>
                    <h3 class="font-script text-4xl text-gray-800 mb-2">${b.title}</h3>
                    <p class="text-gray-500 mb-4">${b.desc}</p>
                    <span class="text-xs font-bold text-rose-300 uppercase tracking-widest">Bouquet ${currentSlide + 1} of 3</span>
                </div>
            `;
        lucide.createIcons();
      }

      function nextSlide() {
        currentSlide = (currentSlide + 1) % bouquets.length;
        renderSlide();
      }

      function prevSlide() {
        currentSlide = (currentSlide - 1 + bouquets.length) % bouquets.length;
        renderSlide();
      }

      renderSlide(); // Init

      // Ribbon Toggle
      function toggleRibbon() {
        const content = document.getElementById("ribbon-content");
        const icon = document.getElementById("ribbon-icon");

        if (content.classList.contains("open")) {
          content.classList.remove("open");
          icon.style.transform = "rotate(0deg)";
        } else {
          content.classList.add("open");
          icon.style.transform = "rotate(180deg)";
        }
      }

      /* --- 5. Midnight Magic --- */
      function scheduleDelivery() {
        const checkbox = document.getElementById("midnight-check");
        if (!checkbox.checked) {
          showToast("Please check the midnight surprise box!");
          return;
        }

        const overlay = document.getElementById("midnight-overlay");
        overlay.classList.add("active");

        // Generate Stars
        for (let i = 0; i < 30; i++) {
          const star = document.createElement("div");
          star.className = "star";
          star.style.top = Math.random() * 100 + "%";
          star.style.left = Math.random() * 100 + "%";
          star.style.width = Math.random() * 3 + 1 + "px";
          star.style.height = star.style.width;
          star.style.setProperty("--duration", Math.random() * 3 + 1 + "s");
          overlay.appendChild(star);
        }
      }

      function closeMidnight() {
        document.getElementById("midnight-overlay").classList.remove("active");
        // Cleanup stars (optional, keeping it simple)
        const stars = document.querySelectorAll(".star");
        stars.forEach((s) => s.remove());
      }

      /* --- 6. Toast System --- */
      function showToast(message) {
        const toast = document.getElementById("toast");
        const msg = document.getElementById("toast-msg");
        msg.innerText = message;

        toast.classList.remove("translate-y-20", "opacity-0");

        setTimeout(() => {
          toast.classList.add("translate-y-20", "opacity-0");
        }, 3000);
      }
    </script>
  </body>
</html>
